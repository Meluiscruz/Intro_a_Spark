<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>6. Jupyter vs CLI: ejecuci√≥n de Spark en Jupyter Notebook.</title><style>
/* webkit printing magic: print all background colors */
html {
	-webkit-print-color-adjust: exact;
}
* {
	box-sizing: border-box;
	-webkit-print-color-adjust: exact;
}

html,
body {
	margin: 0;
	padding: 0;
}
@media only screen {
	body {
		margin: 2em auto;
		max-width: 900px;
		color: rgb(55, 53, 47);
	}
}

body {
	line-height: 1.5;
	white-space: pre-wrap;
}

a,
a.visited {
	color: inherit;
	text-decoration: underline;
}

.pdf-relative-link-path {
	font-size: 80%;
	color: #444;
}

h1,
h2,
h3 {
	letter-spacing: -0.01em;
	line-height: 1.2;
	font-weight: 600;
	margin-bottom: 0;
}

.page-title {
	font-size: 2.5rem;
	font-weight: 700;
	margin-top: 0;
	margin-bottom: 0.75em;
}

h1 {
	font-size: 1.875rem;
	margin-top: 1.875rem;
}

h2 {
	font-size: 1.5rem;
	margin-top: 1.5rem;
}

h3 {
	font-size: 1.25rem;
	margin-top: 1.25rem;
}

.source {
	border: 1px solid #ddd;
	border-radius: 3px;
	padding: 1.5em;
	word-break: break-all;
}

.callout {
	border-radius: 3px;
	padding: 1rem;
}

figure {
	margin: 1.25em 0;
	page-break-inside: avoid;
}

figcaption {
	opacity: 0.5;
	font-size: 85%;
	margin-top: 0.5em;
}

mark {
	background-color: transparent;
}

.indented {
	padding-left: 1.5em;
}

hr {
	background: transparent;
	display: block;
	width: 100%;
	height: 1px;
	visibility: visible;
	border: none;
	border-bottom: 1px solid rgba(55, 53, 47, 0.09);
}

img {
	max-width: 100%;
}

@media only print {
	img {
		max-height: 100vh;
		object-fit: contain;
	}
}

@page {
	margin: 1in;
}

.collection-content {
	font-size: 0.875rem;
}

.column-list {
	display: flex;
	justify-content: space-between;
}

.column {
	padding: 0 1em;
}

.column:first-child {
	padding-left: 0;
}

.column:last-child {
	padding-right: 0;
}

.table_of_contents-item {
	display: block;
	font-size: 0.875rem;
	line-height: 1.3;
	padding: 0.125rem;
}

.table_of_contents-indent-1 {
	margin-left: 1.5rem;
}

.table_of_contents-indent-2 {
	margin-left: 3rem;
}

.table_of_contents-indent-3 {
	margin-left: 4.5rem;
}

.table_of_contents-link {
	text-decoration: none;
	opacity: 0.7;
	border-bottom: 1px solid rgba(55, 53, 47, 0.18);
}

table,
th,
td {
	border: 1px solid rgba(55, 53, 47, 0.09);
	border-collapse: collapse;
}

table {
	border-left: none;
	border-right: none;
}

th,
td {
	font-weight: normal;
	padding: 0.25em 0.5em;
	line-height: 1.5;
	min-height: 1.5em;
	text-align: left;
}

th {
	color: rgba(55, 53, 47, 0.6);
}

ol,
ul {
	margin: 0;
	margin-block-start: 0.6em;
	margin-block-end: 0.6em;
}

li > ol:first-child,
li > ul:first-child {
	margin-block-start: 0.6em;
}

ul > li {
	list-style: disc;
}

ul.to-do-list {
	text-indent: -1.7em;
}

ul.to-do-list > li {
	list-style: none;
}

.to-do-children-checked {
	text-decoration: line-through;
	opacity: 0.375;
}

ul.toggle > li {
	list-style: none;
}

ul {
	padding-inline-start: 1.7em;
}

ul > li {
	padding-left: 0.1em;
}

ol {
	padding-inline-start: 1.6em;
}

ol > li {
	padding-left: 0.2em;
}

.mono ol {
	padding-inline-start: 2em;
}

.mono ol > li {
	text-indent: -0.4em;
}

.toggle {
	padding-inline-start: 0em;
	list-style-type: none;
}

/* Indent toggle children */
.toggle > li > details {
	padding-left: 1.7em;
}

.toggle > li > details > summary {
	margin-left: -1.1em;
}

.selected-value {
	display: inline-block;
	padding: 0 0.5em;
	background: rgba(206, 205, 202, 0.5);
	border-radius: 3px;
	margin-right: 0.5em;
	margin-top: 0.3em;
	margin-bottom: 0.3em;
	white-space: nowrap;
}

.collection-title {
	display: inline-block;
	margin-right: 1em;
}

time {
	opacity: 0.5;
}

.icon {
	display: inline-block;
	max-width: 1.2em;
	max-height: 1.2em;
	text-decoration: none;
	vertical-align: text-bottom;
	margin-right: 0.5em;
}

img.icon {
	border-radius: 3px;
}

.user-icon {
	width: 1.5em;
	height: 1.5em;
	border-radius: 100%;
	margin-right: 0.5rem;
}

.user-icon-inner {
	font-size: 0.8em;
}

.text-icon {
	border: 1px solid #000;
	text-align: center;
}

.page-cover-image {
	display: block;
	object-fit: cover;
	width: 100%;
	height: 30vh;
}

.page-header-icon {
	font-size: 3rem;
	margin-bottom: 1rem;
}

.page-header-icon-with-cover {
	margin-top: -0.72em;
	margin-left: 0.07em;
}

.page-header-icon img {
	border-radius: 3px;
}

.link-to-page {
	margin: 1em 0;
	padding: 0;
	border: none;
	font-weight: 500;
}

p > .user {
	opacity: 0.5;
}

td > .user,
td > time {
	white-space: nowrap;
}

input[type="checkbox"] {
	transform: scale(1.5);
	margin-right: 0.6em;
	vertical-align: middle;
}

p {
	margin-top: 0.5em;
	margin-bottom: 0.5em;
}

.image {
	border: none;
	margin: 1.5em 0;
	padding: 0;
	border-radius: 0;
	text-align: center;
}

.code,
code {
	background: rgba(135, 131, 120, 0.15);
	border-radius: 3px;
	padding: 0.2em 0.4em;
	border-radius: 3px;
	font-size: 85%;
	tab-size: 2;
}

code {
	color: #eb5757;
}

.code {
	padding: 1.5em 1em;
}

.code-wrap {
	white-space: pre-wrap;
	word-break: break-all;
}

.code > code {
	background: none;
	padding: 0;
	font-size: 100%;
	color: inherit;
}

blockquote {
	font-size: 1.25em;
	margin: 1em 0;
	padding-left: 1em;
	border-left: 3px solid rgb(55, 53, 47);
}

.bookmark {
	text-decoration: none;
	max-height: 8em;
	padding: 0;
	display: flex;
	width: 100%;
	align-items: stretch;
}

.bookmark-title {
	font-size: 0.85em;
	overflow: hidden;
	text-overflow: ellipsis;
	height: 1.75em;
	white-space: nowrap;
}

.bookmark-text {
	display: flex;
	flex-direction: column;
}

.bookmark-info {
	flex: 4 1 180px;
	padding: 12px 14px 14px;
	display: flex;
	flex-direction: column;
	justify-content: space-between;
}

.bookmark-image {
	width: 33%;
	flex: 1 1 180px;
	display: block;
	position: relative;
	object-fit: cover;
	border-radius: 1px;
}

.bookmark-description {
	color: rgba(55, 53, 47, 0.6);
	font-size: 0.75em;
	overflow: hidden;
	max-height: 4.5em;
	word-break: break-word;
}

.bookmark-href {
	font-size: 0.75em;
	margin-top: 0.25em;
}

.sans { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol"; }
.code { font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace; }
.serif { font-family: Lyon-Text, Georgia, YuMincho, "Yu Mincho", "Hiragino Mincho ProN", "Hiragino Mincho Pro", "Songti TC", "Songti SC", "SimSun", "Nanum Myeongjo", NanumMyeongjo, Batang, serif; }
.mono { font-family: iawriter-mono, Nitti, Menlo, Courier, monospace; }
.pdf .sans { font-family: Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK SC', 'Noto Sans CJK KR'; }

.pdf .code { font-family: Source Code Pro, "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC', 'Noto Sans Mono CJK KR'; }

.pdf .serif { font-family: PT Serif, Lyon-Text, Georgia, YuMincho, "Yu Mincho", "Hiragino Mincho ProN", "Hiragino Mincho Pro", "Songti TC", "Songti SC", "SimSun", "Nanum Myeongjo", NanumMyeongjo, Batang, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK SC', 'Noto Sans CJK KR'; }

.pdf .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC', 'Noto Sans Mono CJK KR'; }

.highlight-default {
}
.highlight-gray {
	color: rgb(155,154,151);
}
.highlight-brown {
	color: rgb(100,71,58);
}
.highlight-orange {
	color: rgb(217,115,13);
}
.highlight-yellow {
	color: rgb(223,171,1);
}
.highlight-teal {
	color: rgb(15,123,108);
}
.highlight-blue {
	color: rgb(11,110,153);
}
.highlight-purple {
	color: rgb(105,64,165);
}
.highlight-pink {
	color: rgb(173,26,114);
}
.highlight-red {
	color: rgb(224,62,62);
}
.highlight-gray_background {
	background: rgb(235,236,237);
}
.highlight-brown_background {
	background: rgb(233,229,227);
}
.highlight-orange_background {
	background: rgb(250,235,221);
}
.highlight-yellow_background {
	background: rgb(251,243,219);
}
.highlight-teal_background {
	background: rgb(221,237,234);
}
.highlight-blue_background {
	background: rgb(221,235,241);
}
.highlight-purple_background {
	background: rgb(234,228,242);
}
.highlight-pink_background {
	background: rgb(244,223,235);
}
.highlight-red_background {
	background: rgb(251,228,228);
}
.block-color-default {
	color: inherit;
	fill: inherit;
}
.block-color-gray {
	color: rgba(55, 53, 47, 0.6);
	fill: rgba(55, 53, 47, 0.6);
}
.block-color-brown {
	color: rgb(100,71,58);
	fill: rgb(100,71,58);
}
.block-color-orange {
	color: rgb(217,115,13);
	fill: rgb(217,115,13);
}
.block-color-yellow {
	color: rgb(223,171,1);
	fill: rgb(223,171,1);
}
.block-color-teal {
	color: rgb(15,123,108);
	fill: rgb(15,123,108);
}
.block-color-blue {
	color: rgb(11,110,153);
	fill: rgb(11,110,153);
}
.block-color-purple {
	color: rgb(105,64,165);
	fill: rgb(105,64,165);
}
.block-color-pink {
	color: rgb(173,26,114);
	fill: rgb(173,26,114);
}
.block-color-red {
	color: rgb(224,62,62);
	fill: rgb(224,62,62);
}
.block-color-gray_background {
	background: rgb(235,236,237);
}
.block-color-brown_background {
	background: rgb(233,229,227);
}
.block-color-orange_background {
	background: rgb(250,235,221);
}
.block-color-yellow_background {
	background: rgb(251,243,219);
}
.block-color-teal_background {
	background: rgb(221,237,234);
}
.block-color-blue_background {
	background: rgb(221,235,241);
}
.block-color-purple_background {
	background: rgb(234,228,242);
}
.block-color-pink_background {
	background: rgb(244,223,235);
}
.block-color-red_background {
	background: rgb(251,228,228);
}
.select-value-color-default { background-color: rgba(206,205,202,0.5); }
.select-value-color-gray { background-color: rgba(155,154,151, 0.4); }
.select-value-color-brown { background-color: rgba(140,46,0,0.2); }
.select-value-color-orange { background-color: rgba(245,93,0,0.2); }
.select-value-color-yellow { background-color: rgba(233,168,0,0.2); }
.select-value-color-green { background-color: rgba(0,135,107,0.2); }
.select-value-color-blue { background-color: rgba(0,120,223,0.2); }
.select-value-color-purple { background-color: rgba(103,36,222,0.2); }
.select-value-color-pink { background-color: rgba(221,0,129,0.2); }
.select-value-color-red { background-color: rgba(255,0,26,0.2); }

.checkbox {
	display: inline-flex;
	vertical-align: text-bottom;
	width: 16;
	height: 16;
	background-size: 16px;
	margin-left: 2px;
	margin-right: 5px;
}

.checkbox-on {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%2358A9D7%22%2F%3E%0A%3Cpath%20d%3D%22M6.71429%2012.2852L14%204.9995L12.7143%203.71436L6.71429%209.71378L3.28571%206.2831L2%207.57092L6.71429%2012.2852Z%22%20fill%3D%22white%22%2F%3E%0A%3C%2Fsvg%3E");
}

.checkbox-off {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20x%3D%220.75%22%20y%3D%220.75%22%20width%3D%2214.5%22%20height%3D%2214.5%22%20fill%3D%22white%22%20stroke%3D%22%2336352F%22%20stroke-width%3D%221.5%22%2F%3E%0A%3C%2Fsvg%3E");
}
	
</style></head><body><article id="fc5bfe42-d49f-42eb-aa59-63f289558d11" class="page sans"><header><div class="page-header-icon undefined"><span class="icon">üìç</span></div><h1 class="page-title">6. Jupyter vs CLI: ejecuci√≥n de Spark en Jupyter Notebook.</h1></header><div class="page-body"><h2 id="3e5831a3-7494-4791-b503-bc43d7e7d7ba" class="">Configuraci√≥n.</h2><p id="f6c9bd3b-e55d-4df2-b32b-205a984baa8f" class=""><strong>Fecha: </strong>15 de enero, 2021.</p><hr id="6eb72ae5-9d78-42e6-9397-e5b364844191"/><div id="198f221c-da70-4460-aed9-387272100ac9" class="column-list"><div id="f310cb1d-3de9-4ae6-9c2c-a88f85f2f47d" style="width:25%" class="column"><h3 id="780978ba-5ef8-48e6-bf31-795e70847ee9" class="">üéóÔ∏èRecordatorio.</h3><p id="182e468c-a0cb-4d2a-8763-46e3f348cc85" class="">
</p><p id="0d25bcf2-2102-4e65-b476-230a1811e481" class="">¬øQu√© es Anaconda?</p><p id="be5ad1ad-dcc7-4f98-a005-2ef3908b8c52" class="">
</p><p id="c977b07a-27ab-436c-b208-ecddd3c3beb9" class="">Es importante manejar los ambientes virtuales de Anaconda para que funcionen las librer√≠as e instancias de Python con Spark. </p><p id="70ad14c0-f3de-4909-bf45-2a888914a93d" class="">
</p><p id="96514acf-ffe5-4936-bec5-201339aee334" class="">La versi√≥n soportada de Python para Spark 2.4.6  debe ser 3.7.</p><p id="f7667264-379b-4531-934a-b3773ebe20a7" class="">
</p><p id="3ff27094-ea0f-43fc-952e-1f09b56c4c59" class="">¬øQue es un contexto dentro de Spark?</p><p id="8f4f2192-f195-4b8a-8ef3-792bb44e21e1" class="">
</p><p id="ac1ec497-50d7-4760-ad64-5b1269eac912" class="">¬øCu√°l es la diferencia entre contexto y sesi√≥n?</p><p id="5dbd7c63-cd89-4207-b079-051c41fb190e" class="">
</p><p id="98ae0ca4-e335-4b31-b8bb-6bc444fcba74" class="">La sesi√≥n de Spark seguir√° en memoria hasta que expl√≠citamente se indique que pare con <code>spark.stop()</code> </p><p id="02cc0c04-f7ce-4a57-85a3-5db9b42bf9cd" class="">
</p><p id="be6bf65a-db05-48c2-b06e-2db920dc035f" class="">Hay un Jupyter notebook dedicado a esta lecci√≥n.</p></div><div id="5546fc3e-3117-4cef-b6f8-540c7be9bc53" style="width:75%" class="column"><h3 id="ad3b2eec-8868-401f-87fd-3ca3c0ad3dbc" class="">üìíNotas.</h3><h2 id="e53979f4-b539-4266-bad3-960bfcf8ab02" class="">√öltimos ajustes para utilizar Jupyter Notebook.</h2><p id="400507f2-c723-4393-9777-acb49501156b" class="">
</p><p id="dca5f96f-9485-4b71-825e-d5fa826f48ba" class="">Para poder conectar Anaconda con Python y con Spark, debemos agregar las variables globales al archivo <code>.bashrc</code>. A continuaci√≥n se expresan las lineas que debemos agregar al final del archivo (recuerda que para editar el archivo debemos escribir en la consola <code>nano .bashrc</code> , luego guardar el archivo y finalmente refrescar con el comando <code>source .bashrc</code>)</p><style>@import url('https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/themes/prism.min.css')</style><pre id="8f453835-6585-4cb5-a443-29838fa853b6" class="code"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">PYSPARK_DRIVER_PYTHON</span><span class="token operator">=</span><span class="token string">"jupyter"</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">PYSPARK_DRIVER_PYTON_OPTS</span><span class="token operator">=</span><span class="token string">"notebook"</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span>/home/spark/anaconda3/bin:<span class="token environment constant">$PATH</span></code></pre><p id="7df68416-d8ee-4846-9122-8220ac31aad1" class="">
</p><p id="fd337d73-e1b6-4eb1-b3fd-9c24141c1690" class="">Para poder utilizar el comando <code>conda</code> de manera externa y global, debemos a√±adir la siguiente variable de entorno al archivo <code>.bashrc</code></p><style>@import url('https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/themes/prism.min.css')</style><pre id="ead4440c-f3dd-4889-9fb5-1814ebfeff91" class="code"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token string">"/home/cleto/anaconda3/bin:<span class="token environment constant">$PATH</span>"</span></code></pre><p id="1a45f5c2-677c-4317-9934-09a9703fc7b8" class="">
</p><p id="938e4b52-a2df-4000-929f-ad6b4bdedafe" class="">Para ver c√≥mo Spark se comportan las transacciones y autenticaciones en el cuaderno de Jupyter, es recomendable ver el siguiente repositorio:</p><p id="44fba343-b20f-4b47-b33e-36ff1a407446" class="">
</p><figure id="2b0fba80-4bb7-403f-a1b3-62e40803131a"><a href="https://github.com/Meluiscruz/Intro_a_Spark" class="bookmark source"><div class="bookmark-info"><div class="bookmark-text"><div class="bookmark-title">Meluiscruz/Intro_a_Spark</div><div class="bookmark-description">En este repositorio est√†n mis notas de Cornell y mis cuadernos de Jupyter relativos al curso de Spark de Platzi En este repositorio est√†n mis notas de Cornell y mis cuadernos de Jupyter relativos al curso de Spark de Platzi En este repositorio est√†n mis notas de Cornell y mis cuadernos de Jupyter relativos al curso de Spark de Platzi You can&#x27;t perform that action at this time.</div></div><div class="bookmark-href"><img src="https://github.com/favicon.ico" class="icon bookmark-icon"/>https://github.com/Meluiscruz/Intro_a_Spark</div></div><img src="https://avatars1.githubusercontent.com/u/66653326?s=400&amp;v=4" class="bookmark-image"/></a></figure><p id="41258da0-41ef-4ef8-9b30-427c75e397f6" class="">
</p></div></div><figure class="block-color-red_background callout" style="white-space:pre-wrap;display:flex" id="96976199-0677-4bdb-8e8f-c0036042e263"><div style="font-size:1.5em"><span class="icon">üìå</span></div><div style="width:100%"><strong>Resumen: </strong>En conclusi√≥n, la terminal me permite correr Spark en un entorno productivo y sabiendo de antemano que el desarrollo ya est√° probado, mientras que el cuaderno de Jupyter me permite desarrollar de manera m√°s efectiva, ya que no se expresan las transacciones de sesiones y contextos.</div></figure><p id="f8f4e4a5-de72-467a-91d8-0cb58afcc1dc" class="">
</p><h3 id="4ee115a2-ad05-4632-9736-ca7a7a04b65a" class="">Recursos y fuentes.</h3><p id="905a760b-1bfb-4d09-aa45-379cdbdcb4a7" class="">
</p><figure id="e680b29e-e0f8-412a-902e-444932e9c067"><a href="https://conda.io/projects/conda/en/latest/user-guide/tasks/manage-environments.html#activating-an-environment" class="bookmark source"><div class="bookmark-info"><div class="bookmark-text"><div class="bookmark-title">Managing environments - conda 4.9.2.post24+e37cf84a documentation</div><div class="bookmark-description">With conda, you can create, export, list, remove, and update environments that have different versions of Python and/or packages installed in them. Switching or moving between environments is called activating the environment. You can also share an environment file. Note There are many options available for the commands described on this page.</div></div><div class="bookmark-href"><img src="https://conda.io/projects/conda/en/latest/_static/conda-logo.png" class="icon bookmark-icon"/>https://conda.io/projects/conda/en/latest/user-guide/tasks/manage-environments.html#activating-an-environment</div></div></a></figure><figure id="ced634b3-1e78-4bbc-b8e6-534683956444"><a href="https://stackoverflow.com/questions/35246386/conda-command-not-found" class="bookmark source"><div class="bookmark-info"><div class="bookmark-text"><div class="bookmark-title"></div></div><div class="bookmark-href">https://stackoverflow.com/questions/35246386/conda-command-not-found</div></div></a></figure></div></article></body></html>